<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Clientes</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>Cadastro de Cliente</h2>
    <form id="formCliente">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="telefone">Telefone:</label>
      <input type="text" id="telefone" name="telefone" required>
      
      <button type="submit">Cadastrar Cliente</button> 
    </form>
    
    <p id="mensagem"></p>
  </div>

  <script>
    // Correção: Garantir que o JS só execute após o carregamento do DOM
    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("formCliente").addEventListener("submit", async (e) => {
            e.preventDefault();

            // Corrigido: Assegurar que os IDs dos inputs estão corretos
            const cliente = {
                nome: document.getElementById("nome").value,
                email: document.getElementById("email").value,
                telefone: document.getElementById("telefone").value
            };

            // URL do seu servidor/API de backend
            const apiUrl = "http://localhost:8080/clientes"; 

            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(cliente)
                });

                const data = await response.json();
                
                // Limpa o formulário após sucesso (Opcional)
                if (response.ok) { 
                    document.getElementById("formCliente").reset();
                }

                // Exibe a mensagem de sucesso ou erro do servidor
                document.getElementById("mensagem").innerText = data.mensagem || 'Cadastro efetuado com sucesso!';
                
            } catch (error) {
                // Trata falhas de conexão
                document.getElementById("mensagem").innerText = 'Erro ao conectar com o servidor.';
                console.error("Fetch error:", error);
            }
        });
    });
  </script>
</body>
</html>


	
